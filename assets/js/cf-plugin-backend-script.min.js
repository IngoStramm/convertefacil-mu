jQuery(function(a){var b=function(){a(".number").mask("#####0.00"),a(".money").mask("R$###.###.##0,00"),a(".percent").mask("##0,00%",{reverse:!0})},c=function(){a(".normalize-ul").each(function(){var b=a(this),c=b.attr("data-mirror");c=a("."+c),c.length&&b.find("li").each(function(b){var d=a(this),e=c.find("li").eq(b),f=d.height();e.height(f)})})},d=function(){a(".cf-radio-input").change(function(){var b=a(this).attr("data-input");a('input[name="'+b+'"').focus().select(),g()})},e=function(){a(".cf-radio-list-item-input").keyup(function(){var b=a(this).val();""!==b&&g()}).blur(function(){var b=a(this).val(),c=a(this).attr("data-default-value");""===b&&(a(this).val(c),b=c,g())})},f=function(){a(".cf-meta-list-item-input").keyup(function(){a(this).val()}).blur(function(){var b=a(this).val(),c=a(this).attr("data-default-value");""===b&&(a(this).val(c),b=c)})},g=function(){var b=0;a(".cf-radio-input:checked").each(function(){var c=a(this).attr("data-input"),d=parseFloat(a('input[name="'+c+'"').val());b+=d}),b=k(b),a(".cf-total-value-input").val(l(b))},h=function(){a(".cf-save-itens-calc").click(function(b){b.preventDefault();var c=[],d=a(".cf-loading"),e=a(".cf-save-return-message");e.hide().empty(),d.show(),a(".cf-box").each(function(){var b=a(this),d=b.attr("data-option"),e=b.find(".cf-radio-input:checked");if(e.length>0){var f=e.attr("data-index"),g=e.attr("data-input"),h=parseFloat(a('input[name="'+g+'"').val());c.push({option:d,data_index:f,val:h})}}),a.ajax({type:"POST",url:ajaxurl,data:{teste:"Opa",action:"save_itens_calc",options:c},dataType:"json",success:function(a){e.text(a.data.message).show()},complete:function(){d.fadeOut()}})})},i=function(){a(".cf-save-metas").click(function(b){b.preventDefault();var c=a(".cf-valor-medio-por-venda").val(),d=a(".cf-custo-medio-produtos").val(),e=a(".cf-valor-medio-embalagem").val(),f=a(".cf-porcentagem-imposto-renda").val(),g=a(".cf-porcentagem-intermediadores").val(),h=a(".cf-lucro-desejado-mes").val(),i={option_1:{option:"valor_medio_por_venda",val:c},option_2:{option:"custo_medio_produtos",val:d},option_3:{option:"valor_medio_embalagem",val:e},option_4:{option:"pc_imposto_renda",val:f},option_5:{option:"pc_intermediadores",val:g},option_6:{option:"lucro_desejado_mes",val:h}},k=a(".cf-loading"),l=a(".cf-save-return-message");l.hide().empty(),k.show(),a.ajax({type:"POST",url:ajaxurl,data:{action:"save_itens_metas",options:i},dataType:"json",success:function(a){j(),l.text(a.data.message).show()},complete:function(){k.fadeOut()}})})},j=function(){var b=0,c=(parseFloat(a(".total-custo-inicial").val()),parseFloat(a(".total-custo-fixo-mensal").val())),d=parseFloat(a(".cf-valor-medio-embalagem").val()),e=parseFloat(a(".cf-custo-medio-produtos").val()),f=parseFloat(a(".cf-valor-medio-por-venda").val()),g=e/f,h=d/f;g*=100,h*=100;var i=parseFloat(a(".cf-porcentagem-imposto-renda").val()),j=parseFloat(a(".cf-porcentagem-intermediadores").val());b=j+i+h+g,pc_lucro_total=100-b;var n=parseFloat(a(".cf-lucro-desejado-mes").val());valor_lucro_total=n+c,valor_pc_total=100*valor_lucro_total/pc_lucro_total,valor_pc_custos_total=valor_pc_total-valor_lucro_total;var o=a(".cf-meta-venda"),p=valor_pc_total*(n+c)/(valor_pc_total-valor_pc_custos_total);p=k(p),p=isNaN(p)?0:p,o.val(l(p));var q=a(".cf-indice-lucratividade"),r=n/p;r*=100,r=k(r),r=isNaN(r)?0:r,q.val(m(r));var s=p-valor_pc_custos_total,t=s/p*100,u=a(".cf-meta-minima"),v=c/(t/100);v=k(v),v=isNaN(v)?0:v,u.val(l(v))},k=function(a){return Math.round(100*(a+1e-5))/100},l=function(a){return a=a.toFixed(2),a=a.toString().replace(/\D/g,""),a=a.toString().replace(/(\d)(\d{8})$/,"$1.$2"),a=a.toString().replace(/(\d)(\d{5})$/,"$1.$2"),a=a.toString().replace(/(\d)(\d{2})$/,"$1,$2"),"R$ "+a},m=function(a){return a=a.toFixed(2),a=a.toString().replace(/\D/g,""),a=a.toString().replace(/(\d)(\d{2})$/,"$1,$2"),a+" %"},n=function(){a(".page-title-action").each(function(){var b=a(this);"Adicionar existente"===b.text()&&b.text("Adicionar novo")})};a(document).ready(function(){c(),b(),d(),e(),f(),h(),i(),j(),n()}),a(window).resize(function(){c()})});